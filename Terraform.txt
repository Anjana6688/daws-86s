Why not Ansible is used for Infra?

Ansible can create infra, but it can't manage/update infra because of no state management feature available in ansible, originally created for configuration management not good for infra management..
Use terraform for infra creation, once servers are created by terraform handover them to ansible, ansible completes configuration in the server

Terraform: Terraform is an open-source Infrastructure as Code (IaC) tool created by HashiCorp,HCL -> Hashicorp configuration language

Key features and benefits:
=================================
Version control
Automatic CRUD
Consistent infra -> DEV, QA, UAT, PRE-PROD, PERF, PROD
Inventory -> What are the services we are using in cloud
Cost optimisation
Time saving and no human errors
Dependency -> SG, EC2 and then R53
Modular reusable infra
Session-30
================
Hashicorp configuration language syntax:
--------------------------------------------
{
key ="value"
}

resource "type_of_resource" "name-of-resource" {
	
	key = value
	
}

terraform init -> downloads the provider, intialise terraform
We need to use terraform provider.tf code in our repository then need to use this command .
you can find the code in https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance
terraform plan -> It will give us a plan that what it is going to do
terraform apply -> creates the infra as given in the plan
terraform apply -auto-approve
terraform destroy -auto-approve

Variables:
==============
Syntax for vailable:

variable "variable_name" {
	default = "value-of-variable"
}

If you neeed to call the variable use var.variable_name
Note: Variable names should be anything our wish but when we give resource name thats should be as in terraform 

We have written sample code for creating ec2 and security groups reference from terraform doc.
Also variable priority like 
1. command line variable values have first prefernce
2. terraform.tfvars (this we need to give same file no changes to be done.
3. env variable TF_VAR_<variable_name>
4. default value
5. finally prompt

which means if you define an existing variable in cmd it will take the value from command line.
you can check with terraform doc for cmd line.

Conditions:
============
Condition-syintax condition ? true_value : false_value

in variable.tf i have defined as variable 
variable "environment" {
    default = "dev"
}
then i have added a condition in ec2.tf like
    instance_type = var.environment == "dev" ? "t3.micro" : "t3.medium" 
then the variable i have defined as dev so after i have applied the terraform plan then then i can get the t3.micro instance as that is the true conditon.

terraform Plan -Output 
instance_state                       = (known after apply)
      + instance_type                        = "t3.micro"
Loop:
==========
In Terraform there count word which will represents a loop and create multiple environments..
It works with List more frequently.
SO i have created three instances with different names for that i have done
i have created a variable.tf
variable "instances" {
    default = [ "Mongodb", "Reddis", "Mysql" ]
}
and in loop.tf
tags = {
        Name = var.instances[count.index]
        Terraform = "true"
    }

I have added the count.index which means when index is 0 then it will create Mongodb. viseversa forother index as well.
DATE: 05-11-2025
Till now we have created a three instances for that now we are creating records.
for that we are using this code https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record
aws route53 records.
In route 53.tf we have combined two variables.
name    = "var.instances[count.index].var.domain"
we have combined two variables this concept calls Interpolation.
Interpolation/concatination:
===========================
To do concatination of variables we use use ${variable}
name    = "${var.instances[count.index]}.${var.domain}"

